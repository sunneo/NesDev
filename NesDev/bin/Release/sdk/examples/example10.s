;
; File generated by cc65 v 2.13.3
;
	.fopt		compiler,"cc65 v 2.13.3"
	.setcpu		"6502"
	.smart		on
	.autoimport	on
	.case		on
	.debuginfo	off
	.importzp	sp, sreg, regsave, regbank, tmp1, ptr1, ptr2
	.macpack	longbranch
	.forceimport	__STARTUP__
	.import		_pal_bg
	.import		_pal_col
	.import		_ppu_wait_nmi
	.import		_ppu_on_all
	.import		_oam_spr
	.import		_pad_poll
	.import		_scroll
	.import		_set_vram_update
	.import		_flush_vram_update
	.import		_delay
	.export		_palette
	.export		_metatiles
	.export		_metaattrs
	.export		_level_data
	.export		_prepare_row_update
	.export		_preload_screen
	.export		_get_metatile
	.export		_main

.segment	"RODATA"

_palette:
	.byte	$0F
	.byte	$16
	.byte	$26
	.byte	$36
	.byte	$0F
	.byte	$18
	.byte	$28
	.byte	$38
	.byte	$0F
	.byte	$19
	.byte	$29
	.byte	$39
	.byte	$0F
	.byte	$1C
	.byte	$2C
	.byte	$3C
_metatiles:
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$80
	.byte	$81
	.byte	$90
	.byte	$91
	.byte	$82
	.byte	$83
	.byte	$92
	.byte	$93
	.byte	$84
	.byte	$85
	.byte	$94
	.byte	$95
	.byte	$86
	.byte	$87
	.byte	$96
	.byte	$97
_metaattrs:
	.byte	$00
	.byte	$00
	.byte	$55
	.byte	$AA
	.byte	$FF
_level_data:
	.byte	$03
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$03
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$03
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$04
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$04
	.byte	$02
	.byte	$04
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$04
	.byte	$02
	.byte	$04
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$04
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$04
	.byte	$02
	.byte	$04
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$04
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$04
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$00
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$01
	.byte	$01
	.byte	$00
	.byte	$02
	.byte	$02
	.byte	$02
	.byte	$00
	.byte	$03
	.byte	$03
	.byte	$03
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$03
	.byte	$04
	.byte	$01
	.byte	$02
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$01
	.byte	$02

.segment	"BSS"

_update_list:
	.res	47,$00

; ---------------------------------------------------------------
; void __near__ prepare_row_update (unsigned char, unsigned int)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_prepare_row_update: near

.segment	"BSS"

L052E:
	.res	1,$00
L052F:
	.res	1,$00
L0530:
	.res	1,$00
L0531:
	.res	1,$00
L0532:
	.res	1,$00
L0533:
	.res	1,$00
L0534:
	.res	1,$00
L0535:
	.res	1,$00
L0536:
	.res	1,$00
L0537:
	.res	1,$00
L0538:
	.res	2,$00
L0539:
	.res	2,$00
L053A:
	.res	2,$00

.segment	"CODE"

	ldy     #$02
	ldx     #$00
	lda     (sp),y
	cmp     #$1E
	jsr     boolult
	jeq     L053B
	ldy     #$02
	ldx     #$00
	lda     (sp),y
	jsr     aslax4
	jsr     aslax1
	jsr     pushax
	ldx     #$20
	lda     #$00
	jsr     tosaddax
	sta     L0538
	stx     L0538+1
	ldy     #$02
	ldx     #$00
	lda     (sp),y
	jsr     asrax2
	jsr     aslax3
	jsr     pushax
	ldx     #$23
	lda     #$C0
	jsr     tosaddax
	sta     L0539
	stx     L0539+1
	jmp     L0544
L053B:	ldy     #$02
	ldx     #$00
	lda     (sp),y
	sec
	sbc     #$1E
	sta     (sp),y
	ldy     #$02
	ldx     #$00
	lda     (sp),y
	jsr     aslax4
	jsr     aslax1
	jsr     pushax
	ldx     #$28
	lda     #$00
	jsr     tosaddax
	sta     L0538
	stx     L0538+1
	ldy     #$02
	ldx     #$00
	lda     (sp),y
	jsr     asrax2
	jsr     aslax3
	jsr     pushax
	ldx     #$2B
	lda     #$C0
	jsr     tosaddax
	sta     L0539
	stx     L0539+1
L0544:	ldx     #$00
	lda     L0538+1
	ora     #$40
	sta     _update_list
	lda     L0538
	ldx     L0538+1
	ldx     #$00
	sta     _update_list+1
	ldx     #$00
	lda     L0539+1
	ora     #$40
	sta     _update_list+35
	lda     L0539
	ldx     L0539+1
	ldx     #$00
	sta     _update_list+36
	ldx     #$00
	lda     #$03
	sta     L0532
	ldx     #$00
	lda     #$26
	sta     L0533
	ldy     #$01
	jsr     ldaxysp
	jsr     shlax4
	clc
	adc     #<(_level_data)
	tay
	txa
	adc     #>(_level_data)
	tax
	tya
	sta     L053A
	stx     L053A+1
	ldy     #$02
	ldx     #$00
	lda     (sp),y
	ldx     #$00
	and     #$01
	jsr     bnegax
	jeq     L056D
	ldx     #$00
	lda     #$00
	sta     L0531
	jmp     L0572
L056D:	ldx     #$00
	lda     #$02
	sta     L0531
L0572:	ldy     #$02
	ldx     #$00
	lda     (sp),y
	ldx     #$00
	and     #$02
	jsr     bnegax
	jeq     L0575
	ldx     #$00
	lda     #$FC
	sta     L0534
	ldx     #$00
	lda     #$03
	sta     L0535
	ldx     #$00
	lda     #$F3
	sta     L0536
	ldx     #$00
	lda     #$0C
	sta     L0537
	jmp     L0580
L0575:	ldx     #$00
	lda     #$CF
	sta     L0534
	ldx     #$00
	lda     #$30
	sta     L0535
	ldx     #$00
	lda     #$3F
	sta     L0536
	ldx     #$00
	lda     #$C0
	sta     L0537
L0580:	ldx     #$00
	lda     #$00
	sta     L052E
L0589:	ldx     #$00
	lda     L052E
	cmp     #$08
	jsr     boolult
	jne     L058C
	jmp     L058A
L058C:	lda     L053A
	ldx     L053A+1
	sta     regsave
	stx     regsave+1
	jsr     incax1
	sta     L053A
	stx     L053A+1
	lda     regsave
	ldx     regsave+1
	ldy     #$00
	jsr     ldauidx
	sta     L052F
	lda     #<(_update_list)
	ldx     #>(_update_list)
	clc
	adc     L0533
	bcc     L0597
	inx
L0597:	ldy     #$00
	jsr     ldauidx
	jsr     pushax
	ldx     #$00
	lda     L0534
	jsr     tosandax
	jsr     pushax
	lda     #<(_metaattrs)
	ldx     #>(_metaattrs)
	clc
	adc     L052F
	bcc     L059A
	inx
L059A:	ldy     #$00
	jsr     ldauidx
	jsr     pushax
	ldx     #$00
	lda     L0535
	jsr     tosandax
	jsr     tosorax
	sta     L0530
	ldx     #$00
	lda     L052F
	jsr     aslax2
	jsr     pushax
	ldx     #$00
	lda     L0531
	jsr     tosaddax
	sta     L052F
	ldx     #$00
	lda     L0532
	clc
	adc     #<(_update_list)
	tay
	txa
	adc     #>(_update_list)
	tax
	tya
	jsr     pushax
	ldx     #$00
	lda     L052F
	clc
	adc     #<(_metatiles)
	tay
	txa
	adc     #>(_metatiles)
	tax
	tya
	ldy     #$00
	jsr     ldauidx
	ldy     #$00
	jsr     staspidx
	ldx     #$00
	lda     L0532
	jsr     incax1
	clc
	adc     #<(_update_list)
	tay
	txa
	adc     #>(_update_list)
	tax
	tya
	jsr     pushax
	ldx     #$00
	lda     L052F
	jsr     incax1
	clc
	adc     #<(_metatiles)
	tay
	txa
	adc     #>(_metatiles)
	tax
	tya
	ldy     #$00
	jsr     ldauidx
	ldy     #$00
	jsr     staspidx
	lda     L053A
	ldx     L053A+1
	sta     regsave
	stx     regsave+1
	jsr     incax1
	sta     L053A
	stx     L053A+1
	lda     regsave
	ldx     regsave+1
	ldy     #$00
	jsr     ldauidx
	sta     L052F
	ldx     #$00
	lda     L0533
	pha
	clc
	adc     #$01
	sta     L0533
	pla
	clc
	adc     #<(_update_list)
	tay
	txa
	adc     #>(_update_list)
	tax
	tya
	jsr     pushax
	ldx     #$00
	lda     L0530
	jsr     pushax
	ldx     #$00
	lda     L0536
	jsr     tosandax
	jsr     pushax
	lda     #<(_metaattrs)
	ldx     #>(_metaattrs)
	clc
	adc     L052F
	bcc     L05AE
	inx
L05AE:	ldy     #$00
	jsr     ldauidx
	jsr     pushax
	ldx     #$00
	lda     L0537
	jsr     tosandax
	jsr     tosorax
	ldy     #$00
	jsr     staspidx
	ldx     #$00
	lda     L052F
	jsr     aslax2
	jsr     pushax
	ldx     #$00
	lda     L0531
	jsr     tosaddax
	sta     L052F
	ldx     #$00
	lda     L0532
	jsr     incax2
	clc
	adc     #<(_update_list)
	tay
	txa
	adc     #>(_update_list)
	tax
	tya
	jsr     pushax
	ldx     #$00
	lda     L052F
	clc
	adc     #<(_metatiles)
	tay
	txa
	adc     #>(_metatiles)
	tax
	tya
	ldy     #$00
	jsr     ldauidx
	ldy     #$00
	jsr     staspidx
	ldx     #$00
	lda     L0532
	jsr     incax3
	clc
	adc     #<(_update_list)
	tay
	txa
	adc     #>(_update_list)
	tax
	tya
	jsr     pushax
	ldx     #$00
	lda     L052F
	jsr     incax1
	clc
	adc     #<(_metatiles)
	tay
	txa
	adc     #>(_metatiles)
	tax
	tya
	ldy     #$00
	jsr     ldauidx
	ldy     #$00
	jsr     staspidx
	ldx     #$00
	lda     #$04
	clc
	adc     L0532
	sta     L0532
	ldx     #$00
	inc     L052E
	lda     L052E
	jmp     L0589
L058A:	jsr     incsp3
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ preload_screen (unsigned int)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_preload_screen: near

.segment	"BSS"

L05BD:
	.res	1,$00

.segment	"CODE"

	ldx     #$00
	lda     #$00
	sta     L05BD
L05BE:	ldx     #$00
	lda     L05BD
	cmp     #$1E
	jsr     boolult
	jne     L05C1
	jmp     L05BF
L05C1:	ldx     #$00
	lda     #$1D
	jsr     pushax
	ldx     #$00
	lda     L05BD
	jsr     tossubax
	jsr     pusha
	ldy     #$02
	jsr     ldaxysp
	jsr     shrax4
	jsr     pushax
	jsr     _prepare_row_update
	lda     #<(_update_list)
	ldx     #>(_update_list)
	jsr     _flush_vram_update
	ldy     #$00
	ldx     #$00
	lda     #$08
	jsr     addeqysp
	ldx     #$00
	inc     L05BD
	lda     L05BD
	jmp     L05BE
L05BF:	jsr     incsp2
	rts

.endproc

; ---------------------------------------------------------------
; unsigned char __near__ get_metatile (int, unsigned int, unsigned int)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_get_metatile: near

.segment	"CODE"

	ldy     #$05
	jsr     ldaxysp
	ldy     #$F0
	jsr     decaxy
	jsr     pushax
	ldx     #$00
	lda     #$F0
	jsr     pushax
	ldy     #$05
	jsr     ldaxysp
	jsr     tossubax
	jsr     tosaddax
	ldy     #$04
	jsr     staxysp
	ldy     #$05
	jsr     ldaxysp
	cpx     #$80
	lda     #$00
	ldx     #$00
	rol     a
	jeq     L05D1
	ldy     #$04
	ldx     #$05
	lda     #$00
	jsr     addeqysp
L05D1:	ldy     #$05
	jsr     ldaxysp
	jsr     asrax4
	jsr     aslax4
	jsr     pushax
	ldy     #$05
	jsr     ldaxysp
	jsr     shrax4
	jsr     tosorax
	clc
	adc     #<(_level_data)
	tay
	txa
	adc     #>(_level_data)
	tax
	tya
	ldy     #$00
	jsr     ldauidx
	jmp     L05CD
L05CD:	jsr     incsp6
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ main (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_main: near

.segment	"BSS"

L05DD:
	.res	1,$00
L05DE:
	.res	1,$00
L05DF:
	.res	1,$00
L05E0:
	.res	1,$00
L05E1:
	.res	1,$00
L05E2:
	.res	2,$00
L05E3:
	.res	2,$00

.segment	"CODE"

	lda     #<(_palette)
	ldx     #>(_palette)
	jsr     _pal_bg
	lda     #$11
	jsr     pusha
	lda     #$30
	jsr     _pal_col
	ldx     #$00
	lda     #$60
	sta     _update_list
	ldx     #$00
	lda     #$00
	sta     _update_list+1
	ldx     #$00
	lda     #$20
	sta     _update_list+2
	ldx     #$00
	lda     #$60
	sta     _update_list+35
	ldx     #$00
	lda     #$00
	sta     _update_list+36
	ldx     #$00
	lda     #$08
	sta     _update_list+37
	ldx     #$00
	lda     #$FF
	sta     _update_list+46
	ldx     #$00
	lda     #$00
	jsr     pushax
	jsr     _preload_screen
	ldx     #$00
	lda     #$F0
	sta     L05E2
	stx     L05E2+1
	ldx     #$00
	lda     #$00
	sta     L05E3
	stx     L05E3+1
	ldx     #$00
	lda     #$80
	sta     L05E0
	ldx     #$00
	lda     #$78
	sta     L05E1
	jsr     _ppu_on_all
	lda     #$3C
	jsr     _delay
L060B:	jsr     _ppu_wait_nmi
	ldx     #$00
	lda     #$00
	jsr     _set_vram_update
	lda     L05E2
	ldx     L05E2+1
	ldx     #$00
	and     #$07
	jsr     bnegax
	jeq     L0611
	lda     L05E3
	ldx     L05E3+1
	jsr     asrax3
	ldy     #$3B
	jsr     incaxy
	sta     L05DF
	ldx     #$00
	lda     L05DF
	cmp     #$3C
	lda     #$00
	ldx     #$00
	rol     a
	jeq     L0617
	ldx     #$00
	lda     L05DF
	sec
	sbc     #$3C
	sta     L05DF
L0617:	lda     L05DF
	jsr     pusha
	lda     L05E2
	ldx     L05E2+1
	jsr     shrax4
	jsr     pushax
	jsr     _prepare_row_update
	lda     #<(_update_list)
	ldx     #>(_update_list)
	jsr     _set_vram_update
L0611:	ldx     #$00
	lda     #$00
	jsr     pushax
	lda     L05E3
	ldx     L05E3+1
	jsr     _scroll
	inc     L05E2
	bne     L0624
	inc     L05E2+1
L0624:	lda     L05E2
	ldx     L05E2+1
	lda     L05E2
	ldx     L05E2+1
	cmp     #$00
	txa
	sbc     #$05
	lda     #$00
	ldx     #$00
	rol     a
	jeq     L0625
	ldx     #$00
	lda     #$00
	sta     L05E2
	stx     L05E2+1
L0625:	lda     L05E3
	sec
	sbc     #$01
	sta     L05E3
	bcs     L062C
	dec     L05E3+1
L062C:	ldx     L05E3+1
	lda     L05E3
	ldx     L05E3+1
	cpx     #$80
	lda     #$00
	ldx     #$00
	rol     a
	jeq     L062D
	ldx     #$01
	lda     #$DF
	sta     L05E3
	stx     L05E3+1
L062D:	lda     L05E2
	ldx     L05E2+1
	jsr     pushax
	ldx     #$00
	lda     L05E0
	ldx     #$00
	jsr     pushax
	ldx     #$00
	lda     L05E1
	ldx     #$00
	jsr     pushax
	jsr     _get_metatile
	sta     L05DE
	ldx     #$00
	lda     L05DE
	jsr     bnega
	jeq     L0636
	ldx     #$00
	lda     #$1F
	sta     L05DE
	jmp     L063A
L0636:	ldx     #$00
	lda     #$20
	clc
	adc     L05DE
	sta     L05DE
L063A:	ldx     #$00
	lda     L05E0
	jsr     decax4
	jsr     pusha
	ldx     #$00
	lda     L05E1
	jsr     decax4
	jsr     pusha
	lda     L05DE
	jsr     pusha
	lda     #$00
	jsr     pusha
	lda     #$00
	jsr     _oam_spr
	lda     #$00
	jsr     _pad_poll
	sta     L05DD
	ldx     #$00
	lda     L05DD
	ldx     #$00
	and     #$40
	stx     tmp1
	ora     tmp1
	jeq     L0648
	ldx     #$00
	lda     L05E0
	cmp     #$05
	lda     #$00
	ldx     #$00
	rol     a
	jeq     L0648
	ldx     #$00
	lda     L05E0
	sec
	sbc     #$02
	sta     L05E0
L0648:	ldx     #$00
	lda     L05DD
	ldx     #$00
	and     #$80
	stx     tmp1
	ora     tmp1
	jeq     L064E
	ldx     #$00
	lda     L05E0
	cmp     #$FC
	jsr     boolult
	jeq     L064E
	ldx     #$00
	lda     #$02
	clc
	adc     L05E0
	sta     L05E0
L064E:	ldx     #$00
	lda     L05DD
	ldx     #$00
	and     #$10
	stx     tmp1
	ora     tmp1
	jeq     L0654
	ldx     #$00
	lda     L05E1
	cmp     #$05
	lda     #$00
	ldx     #$00
	rol     a
	jeq     L0654
	ldx     #$00
	lda     L05E1
	sec
	sbc     #$02
	sta     L05E1
L0654:	ldx     #$00
	lda     L05DD
	ldx     #$00
	and     #$20
	stx     tmp1
	ora     tmp1
	jeq     L065A
	ldx     #$00
	lda     L05E1
	cmp     #$EC
	jsr     boolult
	jeq     L065A
	ldx     #$00
	lda     #$02
	clc
	adc     L05E1
	sta     L05E1
L065A:	jmp     L060B
	rts

.endproc

